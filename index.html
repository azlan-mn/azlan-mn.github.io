<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/pico.min.css">
  <title>FeedIt</title>
</head>

<script>

const delay = ms => new Promise(res => setTimeout(res, ms));

function addUser() {
  var newName = document.getElementById("newUser");
  if (newName.value.length == 0) return;
  var ul = document.getElementById("users");
  var li = document.createElement('li');
  li.appendChild(document.createTextNode(newName.value));
  ul.appendChild(li);
  newName.value = "";
}

function notifyDelay(delayDuration, message) {
  console.log(Notification.permission);
  if (Notification.permission != 'granted') {
    // console.log('requested'); 
    Notification.requestPermission().then((result) => {console.log(result);});
  }

  setTimeout(function () { notify(message);}, delayDuration * 1000);
}

function notify(message) {
  var title = "FeedIt notification";
  icon = './favicon.png';
  var body = message;
  var notification = new Notification(title, { body, icon });
}

</script>

<body>
<main class="container">

<details>
  <summary>ğŸˆ Pets</summary>
  <section id="pets">
    <article>
      <header>
      Calico Cat ğŸ±
      </header>
    </article>
    <article>
      <header>
      Goldfish ğŸŸ
      </header>
    </article>  
  </section>
</details>

<details>
  <summary>ğŸ‘ª Users</summary>
  <ul id="users">
    <li>Mama</li>
    <li>Papa</li>
  </ul>
</details>

<details>
  <summary>â• Add Pets</summary>
  <legend>Add another pet to the registry</legend>
  <input type="Name" placeholder="Name" />
  <legend>Feeding frequency per day</legend>
  <label class="pure-radio"><input type="Radio" value="Name" />1</label>
  <label class="pure-radio"><input type="Radio" value="Name" />2</label>
  <label class="pure-radio"><input type="Radio" value="Name" />3</label>
  <label class="pure-radio"><input type="Radio" value="Name" />4</label>
  <button class="pure-button">Save</button>
</details>

<details>
  <summary>â• Add Users</summary>
  <legend>Add another user to the registry</legend>
  <input type="Name" placeholder="Name" id="newUser" />
  <button class="pure-button" onclick="addUser()">Save</button>
</details>

<details>
  <summary>âš ï¸ Test</summary>
  <legend>Experimental functions</legend>
  <button class="pure-button" onclick="alert('!!!')">Alert</button>
  <button class="pure-button" onclick="notifyDelay(0, 'Feed Calico Cat ğŸ±')">Notify</button>
  <button class="pure-button" onclick="notifyDelay(5, 'Feed Goldfish ğŸŸ')">Delay 5s + Notify</button>

</details>

</main>

<script>
</script>

</body>
</html>